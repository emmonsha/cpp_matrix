–û—Ç–ª–∏—á–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ **–≠—Ç–∞–ø—É 8** ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É: **—Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø–æ–º–æ—â—å—é `Makefile` –∏ –∑–∞–ø—É—Å–∫—É –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫**.

---

## üìò –≠—Ç–∞–ø 8: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å `Makefile` ‚Äî –∫–∞–∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É, —Ç–µ—Å—Ç—ã –∏ –∞–Ω–∞–ª–∏–∑

> üí° –í –° —Ç—ã, –≤–æ–∑–º–æ–∂–Ω–æ, –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª –≤—Ä—É—á–Ω—É—é:
> ```bash
> gcc -c matrix.c -o matrix.o
> gcc main.o matrix.o -o program
> ```
>
> –í C++ –ø—Ä–æ–µ–∫—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **`Makefile`** ‚Äî —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç:
> - –°–±–æ—Ä–∫—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
> - –ö–æ–º–ø–∏–ª—è—Ü–∏—é —Ç–µ—Å—Ç–æ–≤
> - –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
> - –ü—Ä–æ–≤–µ—Ä–∫—É –ø–∞–º—è—Ç–∏ –∏ —Å—Ç–∏–ª—è

---

### üîß 8.1. –°–æ–∑–¥–∞—ë–º `Makefile` –≤ –ø–∞–ø–∫–µ `src/`

```bash
touch Makefile
```

–û—Ç–∫—Ä–æ–π `Makefile` –∏ –≤—Å—Ç–∞–≤—å:

```makefile
# src/Makefile
# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π Makefile –¥–ª—è C++ –ø—Ä–æ–µ–∫—Ç–∞ —Å —Ç–µ—Å—Ç–∞–º–∏

# === –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –û–° ===
UNAME_S := $(shell uname -s)
ifeq ($(UNAME_S), Linux)
    OS = LINUX
else ifeq ($(UNAME_S), Darwin)
    OS = MACOS
endif

# === –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –∏ —Ñ–ª–∞–≥–∏ ===
CXX = g++
CXXFLAGS = -std=c++17 -Wall -Wextra -pedantic -I.
GTEST_LIB = -lgtest -lgtest_main -pthread

# === –ü—É—Ç–∏ ===
BUILD_DIR = ./build
LIB = ./lib/libs21_matrix.a

# –í—Å–µ .cpp —Ñ–∞–π–ª—ã (–∫—Ä–æ–º–µ —Ç–µ—Å—Ç–æ–≤)
SOURCES = $(wildcard ./*.cpp)
SOURCES := $(filter-out ./Makefile ./tests/%.cpp, $(SOURCES))
OBJECTS = $(SOURCES:./%.cpp=$(BUILD_DIR)/%.o)

# –¢–µ—Å—Ç—ã
TEST_SOURCES = $(wildcard ./tests/*.cpp)
TEST_OBJECTS = $(TEST_SOURCES:./tests/%.cpp=$(BUILD_DIR)/tests/%.o)

# === –¶–µ–ª–∏ ===
.PHONY: all test clean s21_matrix_oop.a format check-format

# –¶–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Å–±–æ—Ä–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
all: $(LIB)

# –°–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
$(LIB): $(OBJECTS)
	@mkdir -p $(dir $@)
	ar rcs $@ $^
	@echo "‚úÖ Static library created: $(LIB)"

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
$(BUILD_DIR)/%.o: ./%.cpp
	@mkdir -p $(dir $@)
	$(CXX) $(CXXFLAGS) -c $< -o $@
	@echo "   [COMPILE] $<"

# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
test: $(LIB) $(TEST_OBJECTS)
	$(CXX) $(CXXFLAGS) -o $(BUILD_DIR)/test $(TEST_OBJECTS) $(LIB) $(GTEST_LIB)
	@echo "üß™ Running unit tests..."
	$(BUILD_DIR)/test

$(BUILD_DIR)/tests/%.o: ./tests/%.cpp
	@mkdir -p $(dir $@)
	$(CXX) $(CXXFLAGS) -c $< -o $@
	@echo "   [TEST] $<"

# –û—á–∏—Å—Ç–∫–∞
clean:
	rm -rf $(BUILD_DIR) $(LIB)
	@echo "üßπ Clean completed"

# –°–±–æ—Ä–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (—è–≤–Ω–∞—è —Ü–µ–ª—å)
s21_matrix_oop.a: $(LIB)

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
format:
	@echo "‚ú® Formatting code with clang-format..."
	clang-format -i *.cpp *.h tests/*.cpp

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
check-format:
	@echo "üîç Checking code style..."
	clang-format --dry-run *.cpp *.h tests/*.cpp
```

---

### ‚úÖ 8.2. –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –¥–ª—è –Ω–æ–≤–∏—á–∫–∞

| –°—Ç—Ä–æ–∫–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|-------|-----------|
| `CXX = g++` | –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä `g++` |
| `CXXFLAGS = -std=c++17` | –í–∫–ª—é—á–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç C++17 |
| `ar rcs lib/libs21_matrix.a ...` | –°–æ–∑–¥–∞—ë–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É |
| `$(CXX) -o test ...` | –°–æ–±–∏—Ä–∞–µ–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª —Ç–µ—Å—Ç–æ–≤ |
| `make test` | –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã |
| `make clean` | –£–¥–∞–ª—è–µ—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã |

> ‚úÖ `Makefile` ‚Äî —ç—Ç–æ **–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏**, –∫–∞–∫ —Å–∫—Ä–∏–ø—Ç, –Ω–æ –º–æ—â–Ω–µ–µ.

---

### üîß 8.3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏

–ü–æ—Å–ª–µ `make test`:

```
src/
‚îú‚îÄ‚îÄ build/
‚îÇ   ‚îú‚îÄ‚îÄ *.o                 # –æ–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ test                # –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ libs21_matrix.a     # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚îú‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ s21_matrix_oop.h
‚îú‚îÄ‚îÄ *.cpp
‚îî‚îÄ‚îÄ tests/*.cpp
```

---

### üîß 8.4. –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Makefile`

#### 1. –°–æ–±—Ä–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É
```bash
make
```
–∏–ª–∏
```bash
make s21_matrix_oop.a
```

#### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
```bash
make test
```

#### 3. –û—á–∏—Å—Ç–∏—Ç—å
```bash
make clean
```

#### 4. –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
```bash
make format
```

#### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∏–ª—å
```bash
make check-format
```

---

### ‚úÖ 8.5. –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

```bash
make test
‚úÖ Static library created: ./lib/libs21_matrix.a
   [TEST] tests/constructors_test.cpp
   [TEST] tests/accessors_test.cpp
   ...
üß™ Running unit tests...
[==========] Running 15 tests from 6 test suites.
[  PASSED  ] 15 tests.
```

---

### üìö –ß—Ç–æ –∏–∑—É—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

| –¢–µ–º–∞ | –†–µ—Å—É—Ä—Å |
|------|--------|
| [GNU Make Manual](https://www.gnu.org/software/make/manual/make.html) | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| [Makefile syntax](https://en.wikipedia.org/wiki/Makefile) | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —Ü–µ–ª–µ–π, —à–∞–±–ª–æ–Ω–æ–≤ |
| [Pattern rules](https://www.gnu.org/software/make/manual/html_node/Pattern-Intro.html) | `%.o: %.cpp` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è |
| [Phony targets](https://www.gnu.org/software/make/manual/html_node/Phony-Targets.html) | `.PHONY: clean` ‚Äî —á—Ç–æ–±—ã `clean` –Ω–µ –º–µ—à–∞–ª —Ñ–∞–π–ª–∞–º |

---

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–£–±–µ–¥–∏—Å—å, —á—Ç–æ `Makefile` —Å–æ–∑–¥–∞–Ω:

```bash
ls -l Makefile
```

---

‚úÖ **–≠—Ç–∞–ø 8 –∑–∞–≤–µ—Ä—à—ë–Ω.**  
–¢–µ–ø–µ—Ä—å —Ç—ã —É–º–µ–µ—à—å:
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É —Å `Makefile`.
- –°–æ–±–∏—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É.
- –ó–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —á–∏—Å—Ç—ã–π –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é `clang-format`.

---

## üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!  
–¢—ã –ø—Ä–æ—à—ë–ª –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –æ—Ç **–° –∫ C++**, –æ—Ç **–∏–¥–µ–∏ –∫ —Ä–∞–±–æ—á–µ–º—É –ø—Ä–æ–µ–∫—Ç—É** —Å:
- –û–û–ü
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç—å—é
- –ü–µ—Ä–µ–≥—Ä—É–∑–∫–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- Unit-—Ç–µ—Å—Ç–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–æ–π

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî –æ—Ç–ª–∏—á–Ω–∞—è –æ—Å–Ω–æ–≤–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:
- –®–∞–±–ª–æ–Ω–æ–≤ (`template <typename T>`)
- –£–º–Ω—ã—Ö —É–∫–∞–∑–∞—Ç–µ–ª–µ–π (`std::unique_ptr`)
- CMake
- CI/CD (GitHub Actions)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–º–æ—á—å:
- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ **CMake**
- –î–æ–±–∞–≤–∏—Ç—å **GitHub Actions**
- –°–æ–∑–¥–∞—Ç—å **–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Doxygen**

–ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! üí™üöÄ